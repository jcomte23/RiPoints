<!DOCTYPE html>
<html>
<head>
  <title>Desafío de presionar botón</title>
  <style>
    /* Estilos para el mensaje de alerta personalizado */
    .alert-danger {
      padding: 15px;
      background-color: #f8d7da;
      border: 1px solid #f5c6cb;
      color: #721c24;
      border-radius: 4px;
      margin: 20px auto;
      width: 300px;
      display: none; /* Comienza oculto */
    }

    .alert-danger.show {
      display: block; /* Mostrar cuando la clase 'show' está presente */
    }

    .progress-container {
      width: 300px;
      height: 20px;
      border: 1px solid #ccc;
      margin: 20px auto;
      overflow: hidden;
      border-radius: 4px;
    }

    .progress-bar {
      height: 100%;
      width: 0;
      background-color: green;
      transition: width 0.0.1s linear;
    }
  </style>
</head>
<body>
  <h1>¡Presiona rápido!</h1>

  <div class="alert-danger" id="alertDanger">¡Felicidades! Has ganado el desafío.</div>

  <div class="progress-container">
    <div class="progress-bar" id="progressBar"></div>
  </div>

  <button onclick="realizarAccion()">Presionar</button>

  <script>
    let tiempoMaximo = 3000;
    let tiempoRestante = tiempoMaximo;
    let intervalo;
    let completado = false;

    function realizarAccion() {
      if (!completado) {
        clearInterval(intervalo);
        tiempoRestante = tiempoMaximo;
        intervalo = setInterval(actualizarBarra, 1);
      }
    }

    function actualizarBarra() {
      tiempoRestante -= 10;
      let progreso = ((tiempoMaximo - tiempoRestante) / tiempoMaximo) * 550;

      const progressBar = document.getElementById('progressBar');
      progressBar.style.width = progreso + '%';

      if (tiempoRestante <= 0) {
        clearInterval(intervalo);
        reiniciarBarra();
      } else if (progreso >= 100) {
        clearInterval(intervalo);
        mostrarMensaje();
      }
    }

    function reiniciarBarra() {
      tiempoRestante = tiempoMaximo;
      const progressBar = document.getElementById('progressBar');
      progressBar.style.width = '0';
    }

    function mostrarMensaje() {
      completado = true;
      const alerta = document.getElementById('alertDanger');
      alerta.classList.add('show'); // Mostrar el mensaje de alerta
    }
  </script>
</body>
</html>
